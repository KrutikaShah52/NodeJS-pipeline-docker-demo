node{
    def app
    def tag = "latest"

    stage('Checkout'){
        checkout scm
    }
    stage('test') {
        def myTestContainer = docker.build("nodejs-docker-app")
        myTestContainer.inside("-u root:root") {
            sh 'npm install'
            sh 'npm test'
        }
    }
}
